import{_ as ce}from"./logo_circle-CFpan6rn.js";import{r as c,u as fe,a as E,h as ge,i as ve,w as l,f as d,o as be,e,d as m,j as U,b as u,k as he,l as Ve,D as ke,I as ye,s as Ce,p as xe,g as we}from"./index-Ci94Kvof.js";import{u as Ue}from"./userStore-B3AV-eTo.js";import{j as $e,k as De,l as Ie,m as Ee,c as Re}from"./shop-BXYZQcQE.js";import{_ as Se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-IzQaM4-z.js";const p=$=>(xe("data-v-c2c3732f"),$=$(),we(),$),Fe=p(()=>u("img",{style:{width:"60px","margin-left":"2rem"},src:ce,alt:"logo"},null,-1)),Ge=p(()=>u("div",{class:"flex-grow"},null,-1)),Oe=p(()=>u("br",null,null,-1)),qe=p(()=>u("span",null,"首页",-1)),Ne=p(()=>u("span",null,"订单管理",-1)),ze=p(()=>u("span",null,"雇员管理",-1)),je=p(()=>u("span",null,"菜品管理",-1)),Be=p(()=>u("span",null,"账 号 设 置",-1)),Te={class:"form-wrapper"},Je={class:"new-button-container"},Me={class:"search-area"},Pe=p(()=>u("br",null,null,-1)),Ae=p(()=>u("br",null,null,-1)),He={class:"pagination-container"},Ke=p(()=>u("span",null,"此操作不可逆！是否确认删除员工？",-1)),Le={class:"dialog-footer"},Qe=p(()=>u("p",null,[m("* 可前往 👉"),u("a",{href:"/#/shop/me"},"个人中心"),m("👈 获取邀请链接和邀请码，快速完成添加。")],-1)),We=p(()=>u("br",null,null,-1)),Xe={class:"dialog-footer"},Ye={class:"dialog-footer"},Ze={__name:"emp",setup($){const A=c("1"),G=Ue().getUsername,g=fe(),O=c([]),q=c(1),R=c(null),S=c(null),v=c(null),V=c(null),k=c(!1),y=c(!1),C=c(!1),N=c(0),x=E({key:""}),r=E({emp_name:"",emp_number:"",emp_role:"",emp_tel:"",emp_condition:""}),s=E({emp_name:"",emp_number:"",emp_role:"",emp_tel:"",emp_condition:""}),z=E({emp_name:[{required:!0,message:"员工名称不能为空",trigger:"blur"}],emp_number:[{required:!0,message:"员工编号不能为空",trigger:"blur"}],emp_role:[{required:!0,message:"员工角色不能为空",trigger:"blur"}],emp_tel:[{required:!0,message:"员工电话不能为空",trigger:"blur"}],emp_condition:[{required:!0,message:"员工状态不能为空",trigger:"blur"}]}),b=(n,o)=>{$e(n,11,o,G).then(function(a){O.value=a.data.map(D=>D),N.value=a.total}).catch(function(a){console.log(a)})},H=n=>{b(n,1)},K=n=>{n&&n.validate(o=>{if(o)console.log(r),De(G,r).then(function(a){alert("员工添加成功！"),B(),y.value=!1,b("",1),console.log(a)}).catch(function(a){console.log(a)});else return!1})};function L(n){S.value=JSON.parse(JSON.stringify(n)),Object.keys(s).forEach(o=>{s[o]=n[o]??""}),console.log(s,n),C.value=!0}function Q(){!V.value||!S.value||V.value.validate(n=>{if(n){let o={emp_name:s.emp_name,emp_number:s.emp_number,emp_tel:s.emp_tel,emp_condition:s.emp_condition,emp_role:s.emp_role};const a=S.value.id;W(a,o),C.value=!1}else console.log("编辑表单验证失败")})}const W=(n,o)=>{Ie(n,o).then(function(a){alert("修改成功！"),console.log(a),b("",1)}).catch(function(a){console.log(a)}),T()};function X(n){R.value=n,k.value=!0}function Y(){R.value&&Z(R.value),k.value=!1}const Z=n=>{Ee(n.id).then(function(o){alert(o),b("",1)}).catch(function(o){console.log(o)})},ee=n=>{b(x.key,n)};ge(()=>{b("",1)});const j=()=>{g.push("/shop/index")},le=()=>{g.push("/shop/addOrder")},oe=()=>{g.push("/shop/order")},te=()=>{g.push("/shop/me")},ne=()=>{g.push("/shop/dish")},ae=()=>{g.push("/shop/emp")},B=()=>{v.value&&v.value.resetFields()},T=()=>{V.value&&V.value.resetFields()},J=()=>{localStorage.removeItem("userInfo"),Re().then(function(n){console.log(n)}).catch(function(n){console.log(n)})};return(n,o)=>{const a=d("el-menu-item"),D=d("el-menu"),ue=d("el-header"),w=d("el-icon"),M=d("el-sub-menu"),se=d("el-col"),de=d("el-row"),f=d("el-button"),i=d("el-form-item"),I=d("el-form"),_=d("el-input"),me=d("el-card"),h=d("el-table-column"),re=d("el-table"),ie=d("el-pagination"),F=d("el-dialog"),pe=d("el-main"),P=d("el-container");return be(),ve(P,{style:{height:"100vh"}},{default:l(()=>[e(ue,{class:"header-menu"},{default:l(()=>[e(D,{"default-active":A.value,class:"el-menu-demo",mode:"horizontal",ellipsis:!1},{default:l(()=>[Fe,e(a,{onClick:j,index:"1",style:{"font-weight":"bold","margin-left":"3rem"}},{default:l(()=>[m(" 内 部 餐 饮 系 统 - 商 户 端 ")]),_:1}),Ge,e(a,{index:"2",onClick:J},{default:l(()=>[m("退 出 登 录")]),_:1})]),_:1},8,["default-active"])]),_:1}),e(P,null,{default:l(()=>[e(de,{class:"tac"},{default:l(()=>[e(se,{span:24},{default:l(()=>[Oe,e(D,{"default-active":"3",class:"el-menu-vertical-demo"},{default:l(()=>[e(a,{index:"1",onClick:j},{default:l(()=>[e(w,null,{default:l(()=>[e(U(he))]),_:1}),qe]),_:1}),e(M,{index:"2"},{title:l(()=>[e(w,null,{default:l(()=>[e(U(Ve))]),_:1}),Ne]),default:l(()=>[e(a,{index:"2-1",onClick:le},{default:l(()=>[m("下单")]),_:1}),e(a,{index:"2-2",onClick:oe},{default:l(()=>[m("订单管理")]),_:1})]),_:1}),e(a,{index:"3",onClick:ae},{default:l(()=>[e(w,null,{default:l(()=>[e(U(ke))]),_:1}),ze]),_:1}),e(a,{index:"4",onClick:ne},{default:l(()=>[e(w,null,{default:l(()=>[e(U(ye))]),_:1}),je]),_:1}),e(M,{index:"5"},{title:l(()=>[e(w,null,{default:l(()=>[e(U(Ce))]),_:1}),Be]),default:l(()=>[e(a,{index:"5-1",onClick:te},{default:l(()=>[m("个 人 中 心")]),_:1}),e(a,{index:"5-2",onClick:J},{default:l(()=>[m("退 出 账 号")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(pe,{style:{"background-image":"none",display:"block",height:"auto"}},{default:l(()=>[e(me,{class:"box-card",shadow:"hover"},{default:l(()=>[u("div",Te,[u("div",Je,[e(I,{inline:!0,"label-width":"20%"},{default:l(()=>[e(i,{class:"add-button-item"},{default:l(()=>[e(f,{type:"success",onClick:o[0]||(o[0]=t=>{y.value=!0})},{default:l(()=>[m("添加雇员")]),_:1})]),_:1})]),_:1})]),u("div",Me,[e(I,{inline:!0,model:x,"label-width":"20%",class:"demo-form-inline search-form","status-icon":""},{default:l(()=>[e(i,{label:"员工名称",prop:"key","label-width":"100px"},{default:l(()=>[e(_,{modelValue:x.key,"onUpdate:modelValue":o[1]||(o[1]=t=>x.key=t),style:{width:"350px"},clearable:""},null,8,["modelValue"])]),_:1}),e(i,null,{default:l(()=>[e(f,{onClick:o[2]||(o[2]=t=>H(x.key)),type:"primary"},{default:l(()=>[m("搜索")]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1}),Pe,e(re,{data:O.value,style:{width:"100%"}},{default:l(()=>[e(h,{prop:"emp_name",label:"员工名称"}),e(h,{prop:"emp_role",label:"员工职位"}),e(h,{prop:"emp_number",label:"员工编号"}),e(h,{prop:"emp_tel",label:"联系电话"}),e(h,{prop:"emp_condition",label:"员工状态"}),e(h,{label:"操作"},{default:l(t=>[e(f,{type:"primary",size:"small",onClick:_e=>L(t.row)},{default:l(()=>[m("编辑")]),_:2},1032,["onClick"]),e(f,{size:"small",type:"danger",onClick:_e=>X(t.row)},{default:l(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Ae,u("div",He,[e(ie,{"current-page":q.value,"onUpdate:currentPage":o[3]||(o[3]=t=>q.value=t),"page-size":11,layout:"prev, pager, next",total:N.value,onCurrentChange:ee},null,8,["current-page","total"])]),e(F,{style:{"margin-right":"54vh","margin-top":"40vh"},modelValue:k.value,"onUpdate:modelValue":o[5]||(o[5]=t=>k.value=t),title:"操作确认",width:"500"},{footer:l(()=>[u("div",Le,[e(f,{onClick:o[4]||(o[4]=t=>k.value=!1)},{default:l(()=>[m("取消")]),_:1}),e(f,{type:"danger",onClick:Y},{default:l(()=>[m(" 确认 ")]),_:1})])]),default:l(()=>[Ke]),_:1},8,["modelValue"]),e(F,{style:{"margin-right":"54vh","margin-top":"30vh"},modelValue:y.value,"onUpdate:modelValue":o[13]||(o[13]=t=>y.value=t),title:"添加员工",width:"500"},{footer:l(()=>[u("div",Xe,[e(f,{onClick:o[11]||(o[11]=t=>{y.value=!1,B(v.value)})},{default:l(()=>[m("取消")]),_:1}),e(f,{type:"success",onClick:o[12]||(o[12]=t=>K(v.value))},{default:l(()=>[m(" 提交 ")]),_:1})])]),default:l(()=>[Qe,We,e(I,{ref_key:"ruleFormRef",ref:v,model:r,rules:z,"label-width":"17%",class:"demo-form","status-icon":""},{default:l(()=>[e(i,{label:"员工名称",prop:"emp_name"},{default:l(()=>[e(_,{modelValue:r.emp_name,"onUpdate:modelValue":o[6]||(o[6]=t=>r.emp_name=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"员工职位",prop:"emp_role"},{default:l(()=>[e(_,{modelValue:r.emp_role,"onUpdate:modelValue":o[7]||(o[7]=t=>r.emp_role=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"员工编号",prop:"emp_number"},{default:l(()=>[e(_,{modelValue:r.emp_number,"onUpdate:modelValue":o[8]||(o[8]=t=>r.emp_number=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"联系电话",prop:"emp_tel"},{default:l(()=>[e(_,{modelValue:r.emp_tel,"onUpdate:modelValue":o[9]||(o[9]=t=>r.emp_tel=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"员工状态",prop:"emp_condition"},{default:l(()=>[e(_,{modelValue:r.emp_condition,"onUpdate:modelValue":o[10]||(o[10]=t=>r.emp_condition=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),e(F,{style:{"margin-right":"54vh","margin-top":"30vh"},modelValue:C.value,"onUpdate:modelValue":o[20]||(o[20]=t=>C.value=t),title:"修改员工信息",width:"500"},{footer:l(()=>[u("div",Ye,[e(f,{onClick:o[19]||(o[19]=t=>{C.value=!1,T(v.value)})},{default:l(()=>[m("取消")]),_:1}),e(f,{type:"primary",onClick:Q},{default:l(()=>[m(" 确认修改 ")]),_:1})])]),default:l(()=>[e(I,{ref_key:"ruleFormRef3",ref:V,model:s,rules:z,"label-width":"17%",class:"demo-form","status-icon":""},{default:l(()=>[e(i,{label:"员工名称",prop:"emp_name"},{default:l(()=>[e(_,{modelValue:s.emp_name,"onUpdate:modelValue":o[14]||(o[14]=t=>s.emp_name=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"员工职位",prop:"emp_role"},{default:l(()=>[e(_,{modelValue:s.emp_role,"onUpdate:modelValue":o[15]||(o[15]=t=>s.emp_role=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"员工编号",prop:"emp_number"},{default:l(()=>[e(_,{modelValue:s.emp_number,"onUpdate:modelValue":o[16]||(o[16]=t=>s.emp_number=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"联系电话",prop:"emp_tel"},{default:l(()=>[e(_,{modelValue:s.emp_tel,"onUpdate:modelValue":o[17]||(o[17]=t=>s.emp_tel=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"员工状态",prop:"emp_condition"},{default:l(()=>[e(_,{modelValue:s.emp_condition,"onUpdate:modelValue":o[18]||(o[18]=t=>s.emp_condition=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},ul=Se(Ze,[["__scopeId","data-v-c2c3732f"]]);export{ul as default};
