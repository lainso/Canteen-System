import{_ as Ve}from"./logo_circle-CFpan6rn.js";import{r as _,u as ke,a as O,h as ye,i as E,w as l,f as d,o as $,e,d as i,j as D,b as s,c as W,k as Ce,l as we,D as xe,I as Ue,s as $e,p as De,g as Ie}from"./index-Cni_yBT1.js";import{u as Re}from"./userStore-C7y7cZWo.js";import{d as Se,n as Fe,o as Ge,p as Oe,c as ze}from"./shop-BXYZQcQE.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-IzQaM4-z.js";const m=I=>(De("data-v-5e9855d7"),I=I(),Ie(),I),Ne=m(()=>s("img",{style:{width:"60px","margin-left":"2rem"},src:Ve,alt:"logo"},null,-1)),Be=m(()=>s("div",{class:"flex-grow"},null,-1)),Te=m(()=>s("br",null,null,-1)),je=m(()=>s("span",null,"首页",-1)),qe=m(()=>s("span",null,"订单管理",-1)),Je=m(()=>s("span",null,"雇员管理",-1)),Me=m(()=>s("span",null,"菜品管理",-1)),Pe=m(()=>s("span",null,"账 号 设 置",-1)),Ae={class:"form-wrapper"},He={class:"new-button-container"},Ke={class:"search-area"},Le=m(()=>s("br",null,null,-1)),Qe={key:1},We=m(()=>s("br",null,null,-1)),Xe={class:"pagination-container"},Ye=m(()=>s("span",null,"此操作不可逆！是否确认删除菜品？",-1)),Ze={class:"dialog-footer"},el=m(()=>s("br",null,null,-1)),ll={key:1,style:{"margin-left":"32%"}},tl={class:"dialog-footer"},ol={class:"dialog-footer"},nl={class:"dialog-footer"},al={__name:"dish",setup(I){const X=_("1"),N=Re().getUsername,h=ke(),B=_([]),T=_(1),z=_(null),g=_(null),v=_(null),V=_(null),k=_(!1),y=_(!1),C=_(!1),R=_(!1),j=_(0),w=O({key:""}),c=O({dish_name:"",dish_price:"",dish_des:"",dish_img:""}),u=O({dish_name:"",dish_price:"",dish_des:"",dish_img:""}),q=O({dish_name:[{required:!0,message:"菜品名称不能为空",trigger:"blur"}],dish_price:[{required:!0,message:"菜品价格不能为空",trigger:"blur"}]}),b=(n,t)=>{Se(n,5,t,N).then(function(a){B.value=a.data.map(S=>S),j.value=a.total}).catch(function(a){console.log(a)})},Y=n=>{b(n,1)},Z=n=>{n&&n.validate(t=>{if(t)console.log(c),Fe(N,c).then(function(a){alert("菜品添加成功！"),M(),y.value=!1,b("",1),console.log(a)}).catch(function(a){console.log(a)});else return!1})};function ee(n){g.value=JSON.parse(JSON.stringify(n)),Object.keys(u).forEach(t=>{u[t]=n[t]??""}),console.log(u,n),C.value=!0}function le(n){g.value=n,R.value=!0}function te(){!V.value||!g.value||V.value.validate(n=>{if(n){let t={dish_name:u.dish_name,dish_price:u.dish_price,dish_des:u.dish_des,dish_img:u.dish_img};const a=g.value.id;oe(a,t),C.value=!1}else console.log("编辑表单验证失败")})}const oe=(n,t)=>{Ge(n,t).then(function(a){alert("修改成功！"),console.log(a),b("",1)}).catch(function(a){console.log(a)}),P()};function ne(n){z.value=n,k.value=!0}function ae(){z.value&&se(z.value),k.value=!1}const se=n=>{Oe(n.id).then(function(t){alert(t),b("",1)}).catch(function(t){console.log(t)})},de=n=>{b(w.key,n)};ye(()=>{b("",1)});const J=()=>{h.push("/shop/index")},ie=()=>{h.push("/shop/addOrder")},ue=()=>{h.push("/shop/order")},re=()=>{h.push("/shop/me")},_e=()=>{h.push("/shop/dish")},me=()=>{h.push("/shop/emp")},M=()=>{v.value&&v.value.resetFields()},P=()=>{V.value&&V.value.resetFields()},A=()=>{localStorage.removeItem("userInfo"),ze().then(function(n){console.log(n)}).catch(function(n){console.log(n)})};return(n,t)=>{const a=d("el-menu-item"),S=d("el-menu"),ce=d("el-header"),x=d("el-icon"),H=d("el-sub-menu"),fe=d("el-col"),pe=d("el-row"),r=d("el-button"),f=d("el-form-item"),F=d("el-form"),p=d("el-input"),he=d("el-card"),U=d("el-table-column"),K=d("el-image"),ge=d("el-table"),ve=d("el-pagination"),G=d("el-dialog"),be=d("el-main"),L=d("el-container");return $(),E(L,{style:{height:"100vh"}},{default:l(()=>[e(ce,{class:"header-menu"},{default:l(()=>[e(S,{"default-active":X.value,class:"el-menu-demo",mode:"horizontal",ellipsis:!1},{default:l(()=>[Ne,e(a,{onClick:J,index:"1",style:{"font-weight":"bold","margin-left":"3rem"}},{default:l(()=>[i(" 内 部 餐 饮 系 统 - 商 户 端 ")]),_:1}),Be,e(a,{index:"2",onClick:A},{default:l(()=>[i("退 出 登 录")]),_:1})]),_:1},8,["default-active"])]),_:1}),e(L,null,{default:l(()=>[e(pe,{class:"tac"},{default:l(()=>[e(fe,{span:24},{default:l(()=>[Te,e(S,{"default-active":"4",class:"el-menu-vertical-demo"},{default:l(()=>[e(a,{index:"1",onClick:J},{default:l(()=>[e(x,null,{default:l(()=>[e(D(Ce))]),_:1}),je]),_:1}),e(H,{index:"2"},{title:l(()=>[e(x,null,{default:l(()=>[e(D(we))]),_:1}),qe]),default:l(()=>[e(a,{index:"2-1",onClick:ie},{default:l(()=>[i("下单")]),_:1}),e(a,{index:"2-2",onClick:ue},{default:l(()=>[i("订单管理")]),_:1})]),_:1}),e(a,{index:"3",onClick:me},{default:l(()=>[e(x,null,{default:l(()=>[e(D(xe))]),_:1}),Je]),_:1}),e(a,{index:"4",onClick:_e},{default:l(()=>[e(x,null,{default:l(()=>[e(D(Ue))]),_:1}),Me]),_:1}),e(H,{index:"5"},{title:l(()=>[e(x,null,{default:l(()=>[e(D($e))]),_:1}),Pe]),default:l(()=>[e(a,{index:"5-1",onClick:re},{default:l(()=>[i("个 人 中 心")]),_:1}),e(a,{index:"5-2",onClick:A},{default:l(()=>[i("退 出 账 号")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(be,{style:{"background-image":"none",display:"block",height:"auto"}},{default:l(()=>[e(he,{class:"box-card",shadow:"hover"},{default:l(()=>[s("div",Ae,[s("div",He,[e(F,{inline:!0,"label-width":"20%"},{default:l(()=>[e(f,{class:"add-button-item"},{default:l(()=>[e(r,{type:"success",onClick:t[0]||(t[0]=o=>{y.value=!0})},{default:l(()=>[i("菜品上新")]),_:1})]),_:1})]),_:1})]),s("div",Ke,[e(F,{inline:!0,model:w,"label-width":"20%",class:"demo-form-inline search-form","status-icon":""},{default:l(()=>[e(f,{label:"菜品名",prop:"key","label-width":"100px"},{default:l(()=>[e(p,{modelValue:w.key,"onUpdate:modelValue":t[1]||(t[1]=o=>w.key=o),style:{width:"350px"},clearable:""},null,8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(r,{onClick:t[2]||(t[2]=o=>Y(w.key)),type:"primary"},{default:l(()=>[i("搜索")]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1}),Le,e(ge,{data:B.value,style:{width:"100%"}},{default:l(()=>[e(U,{prop:"dish_name",label:"菜品名"}),e(U,{prop:"dish_img",label:"菜品图片"},{default:l(o=>[o.row.dish_img?($(),E(K,{key:0,src:o.row.dish_img,style:{width:"80px",height:"80px"},fit:"cover"},null,8,["src"])):($(),W("span",Qe,"暂无"))]),_:1}),e(U,{prop:"dish_price",label:"菜品价格"}),e(U,{prop:"dish_des",label:"菜品描述"}),e(U,{label:"操作"},{default:l(o=>[e(r,{type:"info",size:"small",onClick:Q=>le(o.row)},{default:l(()=>[i("大图")]),_:2},1032,["onClick"]),e(r,{type:"primary",size:"small",onClick:Q=>ee(o.row)},{default:l(()=>[i("编辑")]),_:2},1032,["onClick"]),e(r,{size:"small",type:"danger",onClick:Q=>ne(o.row)},{default:l(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),We,s("div",Xe,[e(ve,{"current-page":T.value,"onUpdate:currentPage":t[3]||(t[3]=o=>T.value=o),"page-size":5,layout:"prev, pager, next",total:j.value,onCurrentChange:de},null,8,["current-page","total"])]),e(G,{style:{"margin-right":"54vh","margin-top":"40vh"},modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=o=>k.value=o),title:"操作确认",width:"500"},{footer:l(()=>[s("div",Ze,[e(r,{onClick:t[4]||(t[4]=o=>k.value=!1)},{default:l(()=>[i("取消")]),_:1}),e(r,{type:"danger",onClick:ae},{default:l(()=>[i(" 确认 ")]),_:1})])]),default:l(()=>[Ye]),_:1},8,["modelValue"]),e(G,{style:{"margin-right":"54vh","margin-top":"20vh"},modelValue:R.value,"onUpdate:modelValue":t[7]||(t[7]=o=>R.value=o),title:"菜品大图",width:"500"},{footer:l(()=>[s("div",tl,[e(r,{type:"info",onClick:t[6]||(t[6]=o=>R.value=!1)},{default:l(()=>[i(" 确认 ")]),_:1})])]),default:l(()=>[el,g.value.dish_img?($(),E(K,{key:0,src:g.value.dish_img,style:{width:"100%"},fit:"cover"},null,8,["src"])):($(),W("span",ll,"暂无图片，可修改后查看"))]),_:1},8,["modelValue"]),e(G,{style:{"margin-right":"54vh","margin-top":"30vh"},modelValue:y.value,"onUpdate:modelValue":t[14]||(t[14]=o=>y.value=o),title:"新建菜品",width:"500"},{footer:l(()=>[s("div",ol,[e(r,{onClick:t[12]||(t[12]=o=>{y.value=!1,M(v.value)})},{default:l(()=>[i("取消")]),_:1}),e(r,{type:"success",onClick:t[13]||(t[13]=o=>Z(v.value))},{default:l(()=>[i(" 提交 ")]),_:1})])]),default:l(()=>[e(F,{ref_key:"ruleFormRef",ref:v,model:c,rules:q,"label-width":"17%",class:"demo-form","status-icon":""},{default:l(()=>[e(f,{label:"菜品名",prop:"dish_name"},{default:l(()=>[e(p,{modelValue:c.dish_name,"onUpdate:modelValue":t[8]||(t[8]=o=>c.dish_name=o)},null,8,["modelValue"])]),_:1}),e(f,{label:"菜品价格",prop:"dish_price"},{default:l(()=>[e(p,{modelValue:c.dish_price,"onUpdate:modelValue":t[9]||(t[9]=o=>c.dish_price=o)},null,8,["modelValue"])]),_:1}),e(f,{label:"图片链接",prop:"dish_img"},{default:l(()=>[e(p,{modelValue:c.dish_img,"onUpdate:modelValue":t[10]||(t[10]=o=>c.dish_img=o)},null,8,["modelValue"])]),_:1}),e(f,{label:"菜品描述",prop:"dish_des"},{default:l(()=>[e(p,{modelValue:c.dish_des,"onUpdate:modelValue":t[11]||(t[11]=o=>c.dish_des=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),e(G,{style:{"margin-right":"54vh","margin-top":"30vh"},modelValue:C.value,"onUpdate:modelValue":t[20]||(t[20]=o=>C.value=o),title:"菜品修改",width:"500"},{footer:l(()=>[s("div",nl,[e(r,{onClick:t[19]||(t[19]=o=>{C.value=!1,P(v.value)})},{default:l(()=>[i("取消")]),_:1}),e(r,{type:"primary",onClick:te},{default:l(()=>[i(" 确认修改 ")]),_:1})])]),default:l(()=>[e(F,{ref_key:"ruleFormRef3",ref:V,model:u,rules:q,"label-width":"17%",class:"demo-form","status-icon":""},{default:l(()=>[e(f,{label:"菜品名",prop:"dish_name"},{default:l(()=>[e(p,{modelValue:u.dish_name,"onUpdate:modelValue":t[15]||(t[15]=o=>u.dish_name=o)},null,8,["modelValue"])]),_:1}),e(f,{label:"菜品价格",prop:"dish_price"},{default:l(()=>[e(p,{modelValue:u.dish_price,"onUpdate:modelValue":t[16]||(t[16]=o=>u.dish_price=o)},null,8,["modelValue"])]),_:1}),e(f,{label:"图片链接",prop:"dish_img"},{default:l(()=>[e(p,{modelValue:u.dish_img,"onUpdate:modelValue":t[17]||(t[17]=o=>u.dish_img=o)},null,8,["modelValue"])]),_:1}),e(f,{label:"菜品描述",prop:"dish_des"},{default:l(()=>[e(p,{modelValue:u.dish_des,"onUpdate:modelValue":t[18]||(t[18]=o=>u.dish_des=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},ml=Ee(al,[["__scopeId","data-v-5e9855d7"]]);export{ml as default};
