import{_ as Ve}from"./logo_circle-CFpan6rn.js";import{r as f,u as ke,a as q,h as Ce,i as xe,w as l,f as d,o as ye,e,d as r,j as v,b as n,k as we,D as Ue,E as $e,l as Ge,m as Se,n as qe,G as ze,s as De,p as Ee,g as Ie}from"./index-Ci94Kvof.js";import{n as Re,o as Ae,p as Fe,q as Ze,b as Ne}from"./super-BqrdXxLP.js";import{_ as Pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-IzQaM4-z.js";const p=G=>(Ee("data-v-cf9b363c"),G=G(),Ie(),G),Be=p(()=>n("img",{style:{width:"60px","margin-left":"2rem"},src:Ve,alt:"logo"},null,-1)),Te=p(()=>n("div",{class:"flex-grow"},null,-1)),je=p(()=>n("br",null,null,-1)),Me=p(()=>n("span",null,"首页",-1)),Oe=p(()=>n("span",null,"账户管理",-1)),He=p(()=>n("span",null,"商户管理",-1)),Je=p(()=>n("span",null,"订单管理",-1)),Ke=p(()=>n("span",null,"通知管理",-1)),Le=p(()=>n("span",null,"支付卡管理",-1)),Qe=p(()=>n("span",null,"促销管理",-1)),We=p(()=>n("span",null,"账 号 设 置",-1)),Xe={class:"form-wrapper"},Ye={class:"new-button-container"},el={class:"search-area"},ll=p(()=>n("br",null,null,-1)),ol=p(()=>n("br",null,null,-1)),tl={class:"pagination-container"},al=p(()=>n("span",null,"此操作不可逆！是否确认删除该商户？",-1)),sl={class:"dialog-footer"},nl=p(()=>n("br",null,null,-1)),ul={class:"dialog-footer"},dl=p(()=>n("br",null,null,-1)),rl={class:"dialog-footer"},il={__name:"shop",setup(G){const H=f("1"),c=ke(),A=f([]),F=f(1),z=f(null),D=f(null),V=f(null),x=f(null),y=f(!1),w=f(!1),U=f(!1),Z=f(0),u=q({username:"",password:"",email:"",address:"",is_active:"",shop_name:"",shop_cus:"",shop_tel:"",shop_head:"",shop_pass:""}),$=q({key:""}),_=q({shop_name:"",shop_tel:"",shop_head:"",shop_pass:""}),N=q({shop_name:[{required:!0,message:"商户名称不能为空",trigger:"blur"}],shop_tel:[{required:!0,message:"商户联系电话不能为空",trigger:"blur"}],shop_pass:[{required:!0,message:"商户邀请码不能为空",trigger:"blur"}],shop_cus:[{required:!0,message:"商户绑定账号不能为空",trigger:"blur"}],username:[{required:!0,message:"账户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],email:[{required:!0,message:"电子邮箱不能为空",trigger:"blur"},{validator:(s,o,a)=>{var C=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/,E=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;!C.test(o)&&o!=""||!E.test(o)&&o!=""?a(new Error("请输入正确的邮箱格式")):a()},message:"请输入正确的邮箱格式",trigger:["blur"]}],is_active:[{required:!0,message:"请选择用户激活状态",trigger:"blur"}]}),k=(s,o)=>{Re(s,11,o).then(function(a){A.value=a.data.map(C=>C),Z.value=a.total}).catch(function(a){console.log(a)})},J=s=>{s&&s.validate(o=>{if(o)console.log(u),Ae(u).then(function(a){alert("新增商户成功！"),P(),w.value=!1,k("",1),console.log(a)}).catch(function(a){console.log(a)});else return!1})};function K(s){D.value=s,Object.keys(_).forEach(o=>{_[o]=s[o]??""}),U.value=!0}function L(){!x.value||!D.value||x.value.validate(s=>{if(s){let o={shop_name:_.shop_name,shop_head:_.shop_head,shop_tel:_.shop_tel,shop_pass:_.shop_pass};const a=D.value.id;Q(a,o),U.value=!1}else console.log("编辑表单验证失败")})}const Q=(s,o)=>{console.log(s,o),Fe(s,o).then(function(a){alert("修改成功"),console.log(a),k("",1)}).catch(function(a){console.log(a)}),B()};function W(s){z.value=s,y.value=!0}function X(){z.value&&Y(z.value),y.value=!1}const Y=s=>{Ze(s.id).then(function(o){alert("删除成功！"),k("",1)}).catch(function(o){console.log(o)})},ee=s=>{k(s,1)},le=s=>{k($.key,s)},P=()=>{V.value&&V.value.resetFields()},B=()=>{x.value&&x.value.resetFields()};Ce(()=>{k("",1)});const T=()=>{c.push("/super/index")},oe=()=>{c.push("/super/order")},te=()=>{c.push("/super/noti")},ae=()=>{c.push("/super/paycard")},se=()=>{c.push("/super/me")},ne=()=>{c.push("/super/payment")},ue=()=>{c.push("/super/dish")},de=()=>{c.push("/super/emp")},re=()=>{c.push("/super/shop")},ie=()=>{c.push("/super/promo")},pe=()=>{c.push("/super/customer")},j=()=>{localStorage.removeItem("userInfo"),Ne().then(function(s){console.log(s)}).catch(function(s){console.log(s)})};return(s,o)=>{const a=d("el-menu-item"),C=d("el-menu"),E=d("el-header"),g=d("el-icon"),I=d("el-sub-menu"),_e=d("el-col"),me=d("el-row"),h=d("el-button"),i=d("el-form-item"),S=d("el-form"),m=d("el-input"),ce=d("el-card"),b=d("el-table-column"),fe=d("el-table"),he=d("el-pagination"),R=d("el-dialog"),M=d("el-option"),ge=d("el-select"),ve=d("el-main"),O=d("el-container");return ye(),xe(O,{style:{height:"100vh"}},{default:l(()=>[e(E,{class:"header-menu"},{default:l(()=>[e(C,{"default-active":H.value,class:"el-menu-demo",mode:"horizontal",ellipsis:!1},{default:l(()=>[Be,e(a,{onClick:T,index:"1",style:{"font-weight":"bold","margin-left":"3rem"}},{default:l(()=>[r(" 内 部 餐 饮 系 统 - 管 理 员 端 ")]),_:1}),Te,e(a,{index:"2",onClick:j},{default:l(()=>[r("退 出 登 录")]),_:1})]),_:1},8,["default-active"])]),_:1}),e(O,null,{default:l(()=>[e(me,{class:"tac"},{default:l(()=>[e(_e,{span:24},{default:l(()=>[je,e(C,{"default-active":"3",class:"el-menu-vertical-demo"},{default:l(()=>[e(a,{index:"1",onClick:T},{default:l(()=>[e(g,null,{default:l(()=>[e(v(we))]),_:1}),Me]),_:1}),e(a,{index:"2",onClick:pe},{default:l(()=>[e(g,null,{default:l(()=>[e(v(Ue))]),_:1}),Oe]),_:1}),e(I,{index:"3"},{title:l(()=>[e(g,null,{default:l(()=>[e(v($e))]),_:1}),He]),default:l(()=>[e(a,{index:"3-1",onClick:re},{default:l(()=>[r("商户")]),_:1}),e(a,{index:"3-2",onClick:de},{default:l(()=>[r("雇员")]),_:1}),e(a,{index:"3-3",onClick:ue},{default:l(()=>[r("菜品")]),_:1})]),_:1}),e(I,{index:"4"},{title:l(()=>[e(g,null,{default:l(()=>[e(v(Ge))]),_:1}),Je]),default:l(()=>[e(a,{index:"4-1",onClick:oe},{default:l(()=>[r("订单")]),_:1}),e(a,{index:"4-2",onClick:ne},{default:l(()=>[r("支付记录")]),_:1})]),_:1}),e(a,{index:"5",onClick:te},{default:l(()=>[e(g,null,{default:l(()=>[e(v(Se))]),_:1}),Ke]),_:1}),e(a,{index:"6",onClick:ae},{default:l(()=>[e(g,null,{default:l(()=>[e(v(qe))]),_:1}),Le]),_:1}),e(a,{index:"7",onClick:ie},{default:l(()=>[e(g,null,{default:l(()=>[e(v(ze))]),_:1}),Qe]),_:1}),e(I,{index:"8"},{title:l(()=>[e(g,null,{default:l(()=>[e(v(De))]),_:1}),We]),default:l(()=>[e(a,{index:"8-1",onClick:se},{default:l(()=>[r("个 人 中 心")]),_:1}),e(a,{index:"8-2",onClick:j},{default:l(()=>[r("退 出 账 号")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(ve,{style:{"background-image":"none",display:"block",height:"auto"}},{default:l(()=>[e(ce,{class:"box-card",shadow:"hover"},{default:l(()=>[n("div",Xe,[n("div",Ye,[e(S,{inline:!0,"label-width":"20%"},{default:l(()=>[e(i,{class:"add-button-item"},{default:l(()=>[e(h,{type:"success",onClick:o[0]||(o[0]=t=>{w.value=!0})},{default:l(()=>[r("创建商户")]),_:1})]),_:1})]),_:1})]),n("div",el,[e(S,{inline:!0,model:$,"label-width":"20%",class:"demo-form-inline search-form","status-icon":""},{default:l(()=>[e(i,{label:"商户名称",prop:"key","label-width":"100px"},{default:l(()=>[e(m,{modelValue:$.key,"onUpdate:modelValue":o[1]||(o[1]=t=>$.key=t),style:{width:"350px"},clearable:""},null,8,["modelValue"])]),_:1}),e(i,null,{default:l(()=>[e(h,{onClick:o[2]||(o[2]=t=>ee($.key)),type:"primary"},{default:l(()=>[r("搜索")]),_:1})]),_:1})]),_:1},8,["model"])])])]),_:1}),ll,e(fe,{data:A.value,style:{width:"100%"}},{default:l(()=>[e(b,{prop:"shop_name",label:"商户名称",width:"120"}),e(b,{prop:"shop_number",label:"商户编号"}),e(b,{prop:"shop_cus",label:"登录账户"}),e(b,{prop:"shop_tel",label:"联系电话"}),e(b,{prop:"shop_head",label:"店长名称"}),e(b,{prop:"shop_pass",label:"邀请码"}),e(b,{label:"操作"},{default:l(t=>[e(h,{type:"primary",size:"small",onClick:be=>K(t.row)},{default:l(()=>[r("编辑")]),_:2},1032,["onClick"]),e(h,{size:"small",type:"danger",onClick:be=>W(t.row)},{default:l(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),ol,n("div",tl,[e(he,{"current-page":F.value,"onUpdate:currentPage":o[3]||(o[3]=t=>F.value=t),"page-size":11,layout:"prev, pager, next",total:Z.value,onCurrentChange:le},null,8,["current-page","total"])]),e(R,{style:{"margin-right":"56vh","margin-top":"40vh"},modelValue:y.value,"onUpdate:modelValue":o[5]||(o[5]=t=>y.value=t),title:"操作确认",width:"500"},{footer:l(()=>[n("div",sl,[e(h,{onClick:o[4]||(o[4]=t=>y.value=!1)},{default:l(()=>[r("取消")]),_:1}),e(h,{type:"danger",onClick:X},{default:l(()=>[r(" 确认 ")]),_:1})])]),default:l(()=>[al]),_:1},8,["modelValue"]),e(R,{style:{"margin-right":"58vh","margin-top":"10vh"},modelValue:w.value,"onUpdate:modelValue":o[17]||(o[17]=t=>w.value=t),title:"新建商户",width:"500"},{footer:l(()=>[n("div",ul,[e(h,{onClick:o[15]||(o[15]=t=>{w.value=!1,P(V.value)})},{default:l(()=>[r("取消")]),_:1}),e(h,{type:"success",onClick:o[16]||(o[16]=t=>J(V.value))},{default:l(()=>[r(" 确认创建 ")]),_:1})])]),default:l(()=>[nl,e(S,{ref_key:"ruleFormRef",ref:V,model:u,rules:N,"label-width":"20%",class:"demo-form","status-icon":""},{default:l(()=>[e(i,{label:"商户名称",prop:"shop_name"},{default:l(()=>[e(m,{modelValue:u.shop_name,"onUpdate:modelValue":o[6]||(o[6]=t=>u.shop_name=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"登录账号",prop:"username"},{default:l(()=>[e(m,{modelValue:u.username,"onUpdate:modelValue":o[7]||(o[7]=t=>u.username=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"登陆密码",prop:"password"},{default:l(()=>[e(m,{modelValue:u.password,"onUpdate:modelValue":o[8]||(o[8]=t=>u.password=t),type:"password"},null,8,["modelValue"])]),_:1}),e(i,{label:"是否激活",prop:"is_active"},{default:l(()=>[e(ge,{modelValue:u.is_active,"onUpdate:modelValue":o[9]||(o[9]=t=>u.is_active=t)},{default:l(()=>[e(M,{label:"是",value:"1"}),e(M,{label:"否",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"联系电话",prop:"shop_tel"},{default:l(()=>[e(m,{modelValue:u.shop_tel,"onUpdate:modelValue":o[10]||(o[10]=t=>u.shop_tel=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"邀请码",prop:"shop_pass"},{default:l(()=>[e(m,{modelValue:u.shop_pass,"onUpdate:modelValue":o[11]||(o[11]=t=>u.shop_pass=t),placeholder:"用于店铺快速添加新雇员"},null,8,["modelValue"])]),_:1}),e(i,{label:"电子邮件",prop:"email"},{default:l(()=>[e(m,{modelValue:u.email,"onUpdate:modelValue":o[12]||(o[12]=t=>u.email=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"店长名称",prop:"shop_head"},{default:l(()=>[e(m,{modelValue:u.shop_head,"onUpdate:modelValue":o[13]||(o[13]=t=>u.shop_head=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"店铺地址",prop:"cus_address"},{default:l(()=>[e(m,{modelValue:u.address,"onUpdate:modelValue":o[14]||(o[14]=t=>u.address=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),e(R,{style:{"margin-right":"58vh","margin-top":"25vh"},modelValue:U.value,"onUpdate:modelValue":o[23]||(o[23]=t=>U.value=t),title:"商户信息修改",width:"500"},{footer:l(()=>[n("div",rl,[e(h,{onClick:o[22]||(o[22]=t=>{U.value=!1,B(V.value)})},{default:l(()=>[r("取消")]),_:1}),e(h,{type:"primary",onClick:L},{default:l(()=>[r(" 确认修改 ")]),_:1})])]),default:l(()=>[dl,e(S,{ref_key:"ruleFormRef3",ref:x,model:_,rules:N,"label-width":"17%",class:"demo-form","status-icon":""},{default:l(()=>[e(i,{label:"商户名称",prop:"shop_name"},{default:l(()=>[e(m,{modelValue:_.shop_name,"onUpdate:modelValue":o[18]||(o[18]=t=>_.shop_name=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"联系电话",prop:"shop_tel"},{default:l(()=>[e(m,{modelValue:_.shop_tel,"onUpdate:modelValue":o[19]||(o[19]=t=>_.shop_tel=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"邀请码",prop:"shop_pass"},{default:l(()=>[e(m,{modelValue:_.shop_pass,"onUpdate:modelValue":o[20]||(o[20]=t=>_.shop_pass=t)},null,8,["modelValue"])]),_:1}),e(i,{label:"店长名称",prop:"shop_head"},{default:l(()=>[e(m,{modelValue:_.shop_head,"onUpdate:modelValue":o[21]||(o[21]=t=>_.shop_head=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},gl=Pe(il,[["__scopeId","data-v-cf9b363c"]]);export{gl as default};
