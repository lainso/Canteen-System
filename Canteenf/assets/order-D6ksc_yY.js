import{_ as fe}from"./logo_circle-CFpan6rn.js";import{r as c,u as he,a as w,h as ve,i as ge,w as o,f as d,o as be,e,d as s,j as m,b as n,t as ke,k as ye,D as xe,E as Ce,l as we,m as Ve,n as Ge,G as $e,s as De,p as Ie,g as Se}from"./index-Ci94Kvof.js";import{y as ze,z as Ee,A as Ne,b as Oe}from"./super-BqrdXxLP.js";import{_ as Re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-IzQaM4-z.js";const u=y=>(Ie("data-v-4419e514"),y=y(),Se(),y),Ue=u(()=>n("img",{style:{width:"60px","margin-left":"2rem"},src:fe,alt:"logo"},null,-1)),Fe=u(()=>n("div",{class:"flex-grow"},null,-1)),Pe=u(()=>n("br",null,null,-1)),Be=u(()=>n("span",null,"首页",-1)),Te=u(()=>n("span",null,"账户管理",-1)),je=u(()=>n("span",null,"商户管理",-1)),qe=u(()=>n("span",null,"订单管理",-1)),Me=u(()=>n("span",null,"通知管理",-1)),Ae=u(()=>n("span",null,"支付卡管理",-1)),Le=u(()=>n("span",null,"促销管理",-1)),He=u(()=>n("span",null,"账 号 设 置",-1)),Je={class:"form-wrapper"},Ke={class:"search-area"},Qe=u(()=>n("h6",{style:{"margin-left":"60vh","margin-top":"7px",color:"red"}},"* 管理员仅拥有部分权限，若需要测试请开通测试商户账号",-1)),We=u(()=>n("br",null,null,-1)),Xe=u(()=>n("br",null,null,-1)),Ye={class:"pagination-container"},Ze=u(()=>n("span",null,"此操作不可逆！是否确认删除该订单？",-1)),eo={class:"dialog-footer"},oo=u(()=>n("br",null,null,-1)),to=u(()=>n("p",null,[s("管理员只可以修改订单状态，"),n("span",{style:{color:"red"}},"且会附带标识"),s("：")],-1)),lo=u(()=>n("br",null,null,-1)),no={class:"dialog-footer"},ao={__name:"order",setup(y){const B=c("1"),i=he(),I=c([]),S=c(1),V=c(null),G=c(null),T=c(null),h=c(null),v=c(!1),g=c(!1),z=c(0),b=w({key:""});w({username:"",shop_name:"",orderlist:"",ord_money:"",ord_time:"",ord_number:"",ord_condition:""});const x=w({username:"",shop_name:"",orderlist:"",ord_money:"",ord_time:"",ord_number:"",ord_condition:""}),j=w({ord_condition:[{required:!0,message:"订单状态不能为空",trigger:"blur"}]}),k=(a,t)=>{ze(a,7,t).then(function(l){I.value=l.data.map(C=>C),z.value=l.total}).catch(function(l){console.log(l)})},q=a=>a.map(t=>`${t.dish_name} × ${t.orderlist_num}`).join("，");ve(()=>{k("",1)});const M=a=>{k(a,1)};function A(a){G.value=a,g.value=!0}function L(){!h.value||!G.value||h.value.validate(a=>{if(a){let t={ord_condition:x.ord_condition};const l=G.value.ord_number;H(l,t),g.value=!1}else console.log("编辑表单验证失败")})}const H=(a,t)=>{Ee(a,t).then(function(l){alert("修改成功"),console.log(l),k("",1)}).catch(function(l){console.log(l)}),O()};function J(a){V.value=a,v.value=!0}function K(){V.value&&Q(V.value),v.value=!1}const Q=a=>{Ne(a.ord_number).then(function(t){alert(t),k("",1)}).catch(function(t){console.log(t)})},W=a=>{k(b.key,a)},E=()=>{i.push("/super/index")},X=()=>{i.push("/super/order")},Y=()=>{i.push("/super/noti")},Z=()=>{i.push("/super/paycard")},ee=()=>{i.push("/super/me")},oe=()=>{i.push("/super/payment")},te=()=>{i.push("/super/dish")},le=()=>{i.push("/super/emp")},ne=()=>{i.push("/super/shop")},ae=()=>{i.push("/super/promo")},se=()=>{i.push("/super/customer")},N=()=>{localStorage.removeItem("userInfo"),Oe().then(function(a){console.log(a)}).catch(function(a){console.log(a)})},O=()=>{h.value&&h.value.resetFields()};return(a,t)=>{const l=d("el-menu-item"),C=d("el-menu"),de=d("el-header"),_=d("el-icon"),$=d("el-sub-menu"),ue=d("el-col"),re=d("el-row"),R=d("el-input"),D=d("el-form-item"),f=d("el-button"),U=d("el-form"),ie=d("el-card"),p=d("el-table-column"),ce=d("el-table"),_e=d("el-pagination"),F=d("el-dialog"),pe=d("el-main"),P=d("el-container");return be(),ge(P,{style:{height:"100vh"}},{default:o(()=>[e(de,{class:"header-menu"},{default:o(()=>[e(C,{"default-active":B.value,class:"el-menu-demo",mode:"horizontal",ellipsis:!1},{default:o(()=>[Ue,e(l,{onClick:E,index:"1",style:{"font-weight":"bold","margin-left":"3rem"}},{default:o(()=>[s(" 内 部 餐 饮 系 统 - 管 理 员 端 ")]),_:1}),Fe,e(l,{index:"2",onClick:N},{default:o(()=>[s("退 出 登 录")]),_:1})]),_:1},8,["default-active"])]),_:1}),e(P,null,{default:o(()=>[e(re,{class:"tac"},{default:o(()=>[e(ue,{span:24},{default:o(()=>[Pe,e(C,{"default-active":"4",class:"el-menu-vertical-demo"},{default:o(()=>[e(l,{index:"1",onClick:E},{default:o(()=>[e(_,null,{default:o(()=>[e(m(ye))]),_:1}),Be]),_:1}),e(l,{index:"2",onClick:se},{default:o(()=>[e(_,null,{default:o(()=>[e(m(xe))]),_:1}),Te]),_:1}),e($,{index:"3"},{title:o(()=>[e(_,null,{default:o(()=>[e(m(Ce))]),_:1}),je]),default:o(()=>[e(l,{index:"3-1",onClick:ne},{default:o(()=>[s("商户")]),_:1}),e(l,{index:"3-2",onClick:le},{default:o(()=>[s("雇员")]),_:1}),e(l,{index:"3-3",onClick:te},{default:o(()=>[s("菜品")]),_:1})]),_:1}),e($,{index:"4"},{title:o(()=>[e(_,null,{default:o(()=>[e(m(we))]),_:1}),qe]),default:o(()=>[e(l,{index:"4-1",onClick:X},{default:o(()=>[s("订单")]),_:1}),e(l,{index:"4-2",onClick:oe},{default:o(()=>[s("支付记录")]),_:1})]),_:1}),e(l,{index:"5",onClick:Y},{default:o(()=>[e(_,null,{default:o(()=>[e(m(Ve))]),_:1}),Me]),_:1}),e(l,{index:"6",onClick:Z},{default:o(()=>[e(_,null,{default:o(()=>[e(m(Ge))]),_:1}),Ae]),_:1}),e(l,{index:"7",onClick:ae},{default:o(()=>[e(_,null,{default:o(()=>[e(m($e))]),_:1}),Le]),_:1}),e($,{index:"8"},{title:o(()=>[e(_,null,{default:o(()=>[e(m(De))]),_:1}),He]),default:o(()=>[e(l,{index:"8-1",onClick:ee},{default:o(()=>[s("个 人 中 心")]),_:1}),e(l,{index:"8-2",onClick:N},{default:o(()=>[s("退 出 账 号")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(pe,{style:{"background-image":"none",display:"block",height:"auto"}},{default:o(()=>[e(ie,{class:"box-card",shadow:"hover"},{default:o(()=>[n("div",Je,[n("div",Ke,[e(U,{inline:!0,model:b,"label-width":"20%",class:"demo-form-inline search-form","status-icon":""},{default:o(()=>[e(D,{label:"订单时间",prop:"key","label-width":"100px"},{default:o(()=>[e(R,{modelValue:b.key,"onUpdate:modelValue":t[0]||(t[0]=r=>b.key=r),style:{width:"350px"},clearable:"",placeholder:"例：2024-01-01"},null,8,["modelValue"])]),_:1}),e(D,null,{default:o(()=>[e(f,{onClick:t[1]||(t[1]=r=>M(b.key)),type:"primary"},{default:o(()=>[s("搜索")]),_:1})]),_:1})]),_:1},8,["model"])])]),Qe]),_:1}),We,e(ce,{data:I.value,style:{width:"100%"}},{default:o(()=>[e(p,{prop:"ord_number",label:"订单号",width:"180"}),e(p,{prop:"ord_time",label:"订单时间",width:"180"}),e(p,{prop:"username",label:`客户账号\r
                    `,width:"150"}),e(p,{prop:"shop_name",label:"商家名称",width:"150"}),e(p,{label:"订单内容"},{default:o(r=>[s(ke(q(r.row.orderlist)),1)]),_:1}),e(p,{prop:"ord_money",label:"订单金额",width:"100"}),e(p,{prop:"ord_condition",label:"订单状态",width:"200"}),e(p,{label:"操作",width:"150"},{default:o(r=>[e(f,{type:"primary",size:"small",onClick:me=>A(r.row)},{default:o(()=>[s("编辑")]),_:2},1032,["onClick"]),e(f,{size:"small",type:"danger",onClick:me=>J(r.row)},{default:o(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Xe,n("div",Ye,[e(_e,{"current-page":S.value,"onUpdate:currentPage":t[2]||(t[2]=r=>S.value=r),"page-size":7,layout:"prev, pager, next",total:z.value,onCurrentChange:W},null,8,["current-page","total"])]),e(F,{style:{"margin-right":"58vh","margin-top":"40vh"},modelValue:v.value,"onUpdate:modelValue":t[4]||(t[4]=r=>v.value=r),title:"操作确认",width:"500"},{footer:o(()=>[n("div",eo,[e(f,{onClick:t[3]||(t[3]=r=>v.value=!1)},{default:o(()=>[s("取消")]),_:1}),e(f,{type:"danger",onClick:K},{default:o(()=>[s(" 确认 ")]),_:1})])]),default:o(()=>[Ze]),_:1},8,["modelValue"]),e(F,{style:{"margin-right":"58vh","margin-top":"35vh"},modelValue:g.value,"onUpdate:modelValue":t[7]||(t[7]=r=>g.value=r),title:"修改订单",width:"500"},{footer:o(()=>[n("div",no,[e(f,{onClick:t[6]||(t[6]=r=>{g.value=!1,O(T.value)})},{default:o(()=>[s("取消")]),_:1}),e(f,{type:"primary",onClick:L},{default:o(()=>[s(" 确认修改 ")]),_:1})])]),default:o(()=>[oo,to,lo,e(U,{ref_key:"ruleFormRef3",ref:h,model:x,rules:j,"label-width":"17%",class:"demo-form","status-icon":""},{default:o(()=>[e(D,{label:"订单状态",prop:"ord_condition"},{default:o(()=>[e(R,{modelValue:x.ord_condition,"onUpdate:modelValue":t[5]||(t[5]=r=>x.ord_condition=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}},_o=Re(ao,[["__scopeId","data-v-4419e514"]]);export{_o as default};
